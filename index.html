<!-- index.html -->
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FAHDiL Market</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Supabase SDK -->
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
    window.SUPA = createClient(
      'https://oyytfanprhcayxthzrbq.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95eXRmYW5wcmhjYXl4dGh6cmJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4NjUxNDEsImV4cCI6MjA2NzQ0MTE0MX0.CPfeVbV2BTP5dYt42yeoxX6XxQ0ezHtFJhKHZ1cY98k'
    );
  </script>
  <script src="script.js" defer></script>
</head>
<body>
  <!-- Sidebar -->
  <nav id="sidebar" class="sidebar">
    <h2>ğŸ›’ FAHDiL Market</h2>
    <ul>
      <li data-page="produk"        onclick="showPage('produk')">ğŸ›ï¸ Produk</li>
      <li data-page="tambah"        onclick="showPage('tambah')">âœï¸ Tambah/Edit</li>
      <li data-page="keranjang"     onclick="showPage('keranjang')">ğŸ›’ Keranjang</li>
      <li data-page="checkout"      onclick="showPage('checkout')">ğŸ“¦ Checkout</li>
      <li data-page="riwayat"       onclick="showPage('riwayat')">ğŸ“œ Riwayat</li>
      <li data-page="struk"         onclick="showPage('struk')">ğŸ§¾ Struk</li>
      <li data-page="dashboard"     onclick="showPage('dashboard')">ğŸ“Š Dashboard</li>
      <li data-page="voucher"       onclick="showPage('voucher')">ğŸŸï¸ Voucher</li>
      <li data-page="wishlist"      onclick="showPage('wishlist')">â¤ï¸ Favorit</li>
      <li data-page="pengaturan"    onclick="showPage('pengaturan')">âš™ï¸ Pengaturan</li>
      <li data-page="konfirmasi"    onclick="showPage('konfirmasi')">âœ… Konfirmasi</li>
      <li data-page="login-pemilik" onclick="showPage('login-pemilik')">ğŸ” Login Pemilik</li>
      <li data-page="login-owner"   onclick="showPage('login-owner')">ğŸ—ï¸ Login Owner</li>
      <li onclick="logout()">ğŸ“¤ Logout</li>
    </ul>
  </nav>

  <!-- Topbar -->
  <header class="topbar">
    <button id="toggleSidebar">â˜°</button>
    <h1>ğŸ›ï¸ FAHDiL Market</h1>
    <input id="searchInput" type="text" placeholder="ğŸ” Cari produk..." />
  </header>

  <!-- Main Content -->
  <main>
    <!-- Produk -->
    <section id="produk" class="halaman active">
      <h2>ğŸ›ï¸ Daftar Produk</h2>
      <div id="produkContainer"></div>
    </section>

    <!-- Tambah/Edit Produk -->
    <section id="tambah" class="halaman">
      <h2>âœï¸ Tambah/Edit Produk</h2>
      <form id="formTambah">
        <label>Nama</label><input id="namaProduk" type="text" required /><br>
        <label>Harga</label><input id="hargaProduk" type="number" required /><br>
        <label>Stok</label><input id="stokProduk" type="number" required /><br>
        <label>Kategori</label><input id="kategoriProduk" type="text" required /><br>
        <label>Gambar</label><input id="gambarProduk" type="file" accept="image/*" /><br>
        <button type="submit" class="btn warna-warni">ğŸ’¾ Simpan</button>
      </form>
    </section>

    <!-- Keranjang -->
    <section id="keranjang" class="halaman">
      <h2>ğŸ›’ Keranjang</h2>
      <div id="keranjangContainer"></div>
    </section>

    <!-- Checkout Manual -->
    <section id="checkout" class="halaman">
      <h2>ğŸ’³ Pembayaran Manual</h2>
      <p>Total yang harus dibayar:</p>
      <h3 id="totalBayar">Rp0</h3>

      <label>Pilih Metode Pembayaran:</label><br>
      <select id="paymentMethod">
        <option value="Seabank">Seabank</option>
        <option value="DANA">DANA</option>
        <option value="OVO">OVO</option>
        <option value="GoPay">GoPay</option>
      </select>

      <div class="rekening-box">
        <ul>
          <li>Seabank : <span id="seabank">123456789012345</span> <button onclick="salin('seabank')">Salin</button></li>
          <li>DANA     : <span id="dana">083131810087</span> <button onclick="salin('dana')">Salin</button></li>
          <li>OVO      : <span id="ovo">083131810087</span> <button onclick="salin('ovo')">Salin</button></li>
          <li>GoPay    : <span id="gopay">083131810087</span> <button onclick="salin('gopay')">Salin</button></li>
        </ul>
      </div>

      <p>ğŸ“© Setelah transfer, siapkan konfirmasi:</p>
      <button class="btn warna-warni" onclick="updateCheckout()">Buat Pesan WA</button>
      <br><br>
      <a href="#" id="waCheckout" target="_blank" class="btn warna-warni">Konfirmasi via WhatsApp</a>
    </section>

    <!-- Riwayat -->
    <section id="riwayat" class="halaman">
      <h2>ğŸ“œ Riwayat Pesanan</h2>
      <div id="riwayatContainer"></div>
    </section>

    <!-- Cetak Struk -->
    <section id="struk" class="halaman">
      <h2>ğŸ§¾ Cetak Struk</h2>
      <button class="btn warna-warni" onclick="cetakPDF()">Cetak PDF</button>
    </section>

    <!-- Dashboard -->
    <section id="dashboard" class="halaman">
      <h2>ğŸ“Š Dashboard Admin</h2>
      <p>Jumlah Produk: <span id="jumlahProduk">0</span></p>
      <p>Total Omzet: <span id="totalOmzet">Rp0</span></p>
    </section>

    <!-- Voucher -->
    <section id="voucher" class="halaman">
      <h2>ğŸŸï¸ Kode Voucher</h2>
      <form id="formVoucher">
        <label>Kode</label><input id="kodeVoucher" type="text" required /><br>
        <label>Diskon (%)</label><input id="diskonVoucher" type="number" required /><br>
        <button type="submit" class="btn warna-warni">ğŸ’¾ Simpan</button>
      </form>
      <div id="voucherList"></div>
    </section>

    <!-- Favorit -->
    <section id="wishlist" class="halaman">
      <h2>â¤ï¸ Favorit</h2>
      <div id="wishlistContainer"></div>
    </section>

    <!-- Pengaturan -->
    <section id="pengaturan" class="halaman">
      <h2>âš™ï¸ Pengaturan</h2>
      <label>Username Baru</label><input id="editUsername" type="text" /><br>
      <label>Password Baru</label><input id="editPassword" type="password" /><br>
      <button onclick="editLogin()" class="btn warna-warni">ğŸ’¾ Simpan</button>
    </section>

    <!-- Konfirmasi Manual (Admin Only) -->
    <section id="konfirmasi" class="halaman">
      <h2>âœ… Konfirmasi Pembayaran</h2>
      <div id="konfirmasiContainer"></div>
    </section>

    <!-- Login Pemilik -->
    <section id="login-pemilik" class="halaman">
      <h2>ğŸ” Login Pemilik</h2>
      <input id="pemilikUser" type="text" placeholder="Username" /><br>
      <input id="pemilikPass" type="password" placeholder="Password" /><br>
      <button onclick="login('pemilik')" class="btn warna-warni">Login</button>
    </section>

    <!-- Login Owner -->
    <section id="login-owner" class="halaman">
      <h2>ğŸ—ï¸ Login Owner</h2>
      <input id="ownerUser" type="text" placeholder="Username" /><br>
      <input id="ownerPass" type="password" placeholder="Password" /><br>
      <button onclick="login('owner')" class="btn warna-warni">Login</button>
    </section>
  </main>
</body>
</html>
